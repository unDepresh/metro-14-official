# Wooden

- type: entity
  name: деревянная баррикада 
  description: Почти сгнившие доски, ржавые гвозди, это вся твоя защита от жесткого мира.
  id: M14BarricadeWoodDirectional
  parent: BaseStructure
  placement:
    mode: SnapgridCenter
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    state: wood_directional
    noRot: false
  - type: Icon
    sprite: _Metro14/Structures/barricades.rsi
    state: wood_directional
  - type: Damageable
    damageContainer: StructuralInorganic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 80
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialWoodPlank1:
            min: 1
            max: 3
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Physics
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.49,-0.39,0.49,-0.36"
        mask:
        - FullTileMask
        layer:
        - WallLayer
  - type: Tag
    tags:
    - Wooden
  - type: Flammable
    fireSpread: true
    damage:
      types:
        Heat: 3
  - type: Appearance
  - type: FireVisuals
    sprite: Effects/fire.rsi
    normalState: 1
  - type: Climbable
    delay: 3

- type: entity
  name: деревянная баррикада 
  description: Более укреплённая версия деревянной баррикады. Всё так же очень хорошо горит.
  id: M14BarricadeWooden
  parent: M14BarricadeWoodDirectional
  placement:
    mode: SnapgridCenter
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    state: wooden
    noRot: false
  - type: Icon
    sprite: _Metro14/Structures/barricades.rsi
    state: wooden
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialWoodPlank1:
            min: 3
            max: 5
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Climbable
    delay: 4

- type: entity
  id: M14BaseBarricade
  abstract: true
  placement:
    mode: SnapgridCenter
  components:
  - type: Transform
    anchored: false
  - type: Physics
    bodyType: Static
  - type: InteractionOutline
  - type: Clickable
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.39,-0.39,0.39,-0.36"
        layer:
        - TableLayer
        mask:
        - TableMask

# Sandbags

- type: entity
  parent: M14BaseBarricade
  id: M14BarricadeSandbags
  name: мешки с песком
  description: Мешки с песком, положенные на друг друга. Служат не очень хорошей защитой, но зато есть где укрыться.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    state: sandbag
    noRot: false
  - type: Icon
    sprite: _Metro14/Structures/barricades.rsi
    state: sandbag
  - type: Damageable
    damageContainer: StructuralInorganic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialCloth1:
            min: 3
            max: 5
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Appearance
  - type: Climbable
    delay: 0.5

- type: entity
  parent: M14BarricadeSandbags
  id: M14BarricadeSandbagsWire
  name: мешки с песком с колючей проволокой
  description: Мешки с песком, положенные на друг друга. Служат не очень хорошей защитой, но зато есть где укрыться. Сверху есть колючая проволока, что усложняет переправу через неё.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    state: sandbag_wire
    noRot: false
  - type: Icon
    sprite: _Metro14/Structures/barricades.rsi
    state: sandbag_wire
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialCloth1:
            min: 3
            max: 5
          PartRodMetal1:
            min: 1
            max: 3
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Climbable
    delay: 3

# Metal and plasteel

- type: entity
  parent: M14BaseBarricade
  id: M14BarricadeMetal
  name: металлическая баррикада
  description: Довольно крепкая баррикада из металлической пластины, которая способна поглотить среднее количество урона.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    state: metal
    noRot: false
  - type: Icon
    sprite: _Metro14/Structures/barricades.rsi
    state: metal
  - type: Damageable
    damageContainer: StructuralInorganic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 200
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetSteel1:
            min: 3
            max: 5
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Appearance
  - type: Climbable
    delay: 2

- type: entity
  parent: M14BarricadeMetal
  id: M14BarricadeMetalWire
  name: металлическая баррикада с колючей проволокой
  description: Довольно крепкая баррикада из металлической пластины, которая способна поглотить среднее количество урона. Сверху есть колючая проволока, что усложняет переправу через неё.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    state: metal_wire
    noRot: false
  - type: Icon
    sprite: _Metro14/Structures/barricades.rsi
    state: metal_wire
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 200
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetSteel1:
            min: 3
            max: 5
          PartRodMetal1:
            min: 1
            max: 3
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Climbable
    delay: 7

- type: entity
  parent: M14BaseBarricade
  id: M14BarricadePlasteel
  name: укреплённая металлическая баррикада
  description: Очень крепкая баррикада из укреплённой металлической пластины, которая способна поглотить среднее количество урона.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    state: plasteel
    noRot: false
  - type: Icon
    sprite: _Metro14/Structures/barricades.rsi
    state: plasteel
  - type: Damageable
    damageContainer: StructuralInorganic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 300
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetPlasteel1:
            min: 3
            max: 5
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Appearance
  - type: Climbable
    delay: 2

- type: entity
  parent: M14BarricadePlasteel
  id: M14BarricadePlasteelWire
  name: укреплённая металлическая баррикада с колючей проволокой
  description: Очень крепкая баррикада из укреплённой металлической пластины, которая способна поглотить среднее количество урона. Сверху есть колючая проволока, что усложняет переправу через неё.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    state: plasteel_wire
    noRot: false
  - type: Icon
    sprite: _Metro14/Structures/barricades.rsi
    state: plasteel_wire
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 300
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetPlasteel1:
            min: 3
            max: 5
          PartRodMetal1:
            min: 1
            max: 3
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Climbable
    delay: 7

# Folding metal

- type: entity
  parent: M14BaseBarricade
  id: M14FoldingBarricadeMetal
  name: складная металлическая баррикада
  description: Довольно крепкая баррикада из металлической пластины, которая способна поглотить среднее количество урона. Можно сложить.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    layers:
    - state: folding_metal_closed
    - state: folding_metal
      map: ["enum.LockVisualLayers.Lock"]
  - type: Appearance
  - type: LockVisuals
  - type: Fixtures
    fixtures:
      base:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.49,-0.39,0.49,-0.36"
        mask:
        - MachineMask
        layer:
        - None
      barrier:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.49,-0.39,0.49,-0.36"
        layer:
        - TableLayer
        hard: true
  - type: DeployableBarrier
    fixture: barrier
  - type: Lock
    locked: false
    lockOnClick: true
    lockTime: 3
    unlockTime: 3
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 200
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetSteel:
            min: 5
            max: 5
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Climbable
    delay: 2

- type: entity
  parent: M14FoldingBarricadeMetal
  id: M14FoldingBarricadeMetalWire
  name: складная металлическая баррикада с колючей проволокой
  description: Довольно крепкая баррикада из металлической пластины, которая способна поглотить среднее количество урона. Можно сложить. Сверху есть колючая проволока, что усложняет переправу через неё.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    layers:
    - state: folding_metal_closed_wire
    - state: folding_metal_wire
      map: ["enum.LockVisualLayers.Lock"]
  - type: Climbable
    delay: 5

# Folding plasteel

- type: entity
  parent: M14BaseBarricade
  id: M14FoldingBarricadePlasteel
  name: укреплённая складная металлическая баррикада
  description: Очень крепкая баррикада из укреплённой металлической пластины, которая способна поглотить среднее количество урона. Можно сложить.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    layers:
    - state: folding_plasteel_closed
    - state: folding_plasteel
      map: ["enum.LockVisualLayers.Lock"]
  - type: Appearance
  - type: LockVisuals
  - type: Physics
    canCollide: false
  - type: Fixtures
    fixtures:
      base:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.49,-0.39,0.49,-0.36"
        mask:
        - MachineMask
        layer:
        - None
      barrier:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.49,-0.39,0.49,-0.36"
        layer:
        - TableLayer
        hard: true
  - type: DeployableBarrier
    fixture: barrier
  - type: Lock
    locked: false
    lockOnClick: true
    lockTime: 3
    unlockTime: 3
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 300
      behaviors:
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetPlasteel1:
            min: 5
            max: 5
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Climbable
    delay: 3

- type: entity
  parent: M14FoldingBarricadePlasteel
  id: M14FoldingBarricadePlasteelWire
  name: укреплённая складная металлическая баррикада с колючей проволокой
  description: Очень крепкая баррикада из укреплённой металлической пластины, которая способна поглотить среднее количество урона. Можно сложить. Сверху есть колючая проволока, что усложняет переправу через неё.
  components:
  - type: Sprite
    sprite: _Metro14/Structures/barricades.rsi
    layers:
    - state: folding_plasteel_closed_wire
    - state: folding_plasteel_wire
      map: ["enum.LockVisualLayers.Lock"]
  - type: Climbable
    delay: 5

# Portable folding На доработке

#- type: entity
#  name: переносная металлическая баррикада
#  id: M14FoldingBarricadePortable
#  description: Переносная металлическая баррикада из 5 металлических пластин. Удобна в бою, если надо срочно поставить баррикаду, а потом перенести в другое место. Толщина металла была уменьшена, дабы можно было её переносить, следовательно, потеряла немного прочности и защиты.
#  parent: BaseStructure
#  placement:
#    mode: SnapgridCenter
#  components:
#  - type: Transform
#    anchored: false
#  - type: Sprite
#    sprite: _Metro14/Structures/barricades.rsi
#    layers:
#    - state: folding_metal_closed
#    - state: folding_metal
#      map: ["enum.LockVisualLayers.Lock"]
#  - type: Appearance
#  - type: LockVisuals
#  - type: InteractionOutline
#  - type: Physics
#    bodyType: Dynamic
#    canCollide: false
#  - type: Fixtures
#    fixtures:
#      fix1:
#        shape:
#          !type:PhysShapeAabb
#          bounds: "-0.49,-0.39,0.49,-0.36"
#        mask:
#        - FullTileMask
#        layer:
#        - WallLayer
#  - type: DeployableBarrier
#    fixture: barrier
#  - type: Lock
#    locked: false
#    lockOnClick: true
#    lockTime: 3
#    unlockTime: 3
#  - type: Damageable
#    damageContainer: StructuralInorganic
#    damageModifierSet: Metallic
#  - type: Destructible
#    thresholds:
#    - trigger:
#        !type:DamageTrigger
#        damage: 600
#      behaviors:
#        - !type:DoActsBehavior
#          acts: [ "Destruction" ]
#    - trigger:
#        !type:DamageTrigger
#        damage: 300
#      behaviors:
#      - !type:SpawnEntitiesBehavior
#        spawn:
#          SheetSteel:
#            min: 5
#            max: 5
#      - !type:PlaySoundBehavior
#        sound:
#          collection: MetalBreak
#      - !type:DoActsBehavior
#        acts: [ "Destruction" ]
#  - type: Climbable
#    delay: 2